(()=>{var e={};e.id=11,e.ids=[11,888,660],e.modules={5536:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>m,getStaticProps:()=>u,reportWebVitals:()=>E,routeModule:()=>I,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>f,unstable_getStaticParams:()=>P,unstable_getStaticPaths:()=>C,unstable_getStaticProps:()=>y});var s=a(6373),n=a(4811),i=a(7594),o=a(1026),c=a.n(o),l=a(9798),d=a(4808),h=e([d]);d=(h.then?(await h)():h)[0];let p=(0,i.l)(d,"default"),u=(0,i.l)(d,"getStaticProps"),m=(0,i.l)(d,"getStaticPaths"),x=(0,i.l)(d,"getServerSideProps"),g=(0,i.l)(d,"config"),E=(0,i.l)(d,"reportWebVitals"),y=(0,i.l)(d,"unstable_getStaticProps"),C=(0,i.l)(d,"unstable_getStaticPaths"),P=(0,i.l)(d,"unstable_getStaticParams"),j=(0,i.l)(d,"unstable_getServerProps"),f=(0,i.l)(d,"unstable_getServerSideProps"),I=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/[gameMode]/[environmentMode]",pathname:"/[gameMode]/[environmentMode]",bundlePath:"",filename:""},components:{App:l.default,Document:c()},userland:d});r()}catch(e){r(e)}})},4808:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>p,getStaticPaths:()=>d,getStaticProps:()=>h});var s=a(997);a(6689);var n=a(6105),i=a(2736),o=a(9575),c=a(333),l=e([o,c]);[o,c]=l.then?(await l)():l;let p=({initialGameMode:e,initialEnvironmentMode:t})=>s.jsx("div",{id:"root",children:s.jsx(c.Z,{initialEnvironmentMode:t,initialGameMode:e})});async function d(){let e=[];for(let t of Object.values(i.$))for(let a of o.ug[t])e.push({params:{gameMode:a.toLowerCase(),environmentMode:t.toLowerCase()}});return{paths:e,fallback:!1}}async function h({params:e}){let{gameMode:t,environmentMode:a}=e,r=t.toUpperCase(),s=a.toUpperCase();return{props:{initialGameMode:r,initialEnvironmentMode:s}}}(0,n.Z)(),r()}catch(e){r(e)}})},9798:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(997);a(6689),a(5445);let s=function({Component:e,pageProps:t}){return r.jsx(e,{...t})}},333:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>l});var s=a(997),n=a(6689),i=a(2744),o=a(9575),c=e([i,o]);[i,o]=c.then?(await c)():c;let l=({initialEnvironmentMode:e,initialGameMode:t})=>{let[a,r]=(0,n.useState)(e),[c,l]=(0,n.useState)(t),d=o.Wm[c];return(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{currentGameMode:c,setGameMode:l,environmentMode:a,setEnvironmentMode:r}),s.jsx(d,{environmentMode:a})]})};r()}catch(e){r(e)}})},4615:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>n,aU:()=>r});var r,s=a(6689);!function(e){e.PLACE="PLACE",e.BREAK="BREAK"}(r||(r={}));let n=()=>{let[e,t]=(0,s.useState)("PLACE");return{current:e,setCurrent:t}}},6131:(e,t,a)=>{"use strict";a.d(t,{QP:()=>n,VC:()=>r,ZP:()=>i});var r,s=a(6689);!function(e){e.FREE="Free camera",e.SIDE_VIEW="Side view",e.UPPER_VIEW="Upper view"}(r||(r={}));let n={"Free camera":{orthographic:!1,polarAngle:{max:Math.PI,min:0},cameraSettings:{fov:75,aspect:1,near:.1,far:1e3,position:[0,5,10]}},"Side view":{orthographic:!0,polarAngle:{max:Math.PI/2,min:Math.PI/2},cameraSettings:{zoom:50,position:[100,5,10]}},"Upper view":{orthographic:!0,polarAngle:{max:0,min:0},cameraSettings:{zoom:50,position:[0,5,10]},azimuthAngle:{max:0,min:0}}},i=()=>{let[e,t]=(0,s.useState)("Free camera");return{current:e,setCurrent:t}}},9916:(e,t,a)=>{"use strict";a.d(t,{R:()=>s});var r=a(6689);let s=()=>{let[e,t]=(0,r.useState)([]);return{chatHistory:e,setChatHistory:t,addMessage:e=>{e.content&&t(t=>[...t,e])},clear:()=>{t([])}}}},2736:(e,t,a)=>{"use strict";var r;a.d(t,{$:()=>r}),function(e){e.MINECRAFT="MINECRAFT",e.COCOBOTS="COCOBOTS"}(r||(r={}))},6998:(e,t,a)=>{"use strict";a.d(t,{m:()=>n});var r=a(6689),s=a(8452);let n=(e,t)=>{let[a,n]=(0,r.useState)(e[0]),[i,o]=(0,r.useState)(e),[c,l]=(0,r.useState)(t[0]),[d,h]=(0,r.useState)(t);return{currentColor:a,colors:i,currentShape:c,shapes:d,setCurrentColor:n,setColors:o,setCurrentShape:l,setShapes:h,changeColor:e=>{n(s.D[e])}}}},3159:(e,t,a)=>{"use strict";a.d(t,{g:()=>r});class r{constructor(){this.gameLog=[{chatHistory:[],shapeInPlace:[],timestamp:new Date}]}getLength(){return this.gameLog.length}addWorldState(e){this.gameLog.push(e)}clear(){this.gameLog=[]}getLastWorldState(){let e=this.gameLog[this.gameLog.length-1];return e?e.timestamp?{timestamp:e.timestamp,chatHistory:[...e.chatHistory],shapeInPlace:[...e.shapeInPlace]}:{chatHistory:[...e.chatHistory],shapeInPlace:[...e.shapeInPlace]}:void 0}getWorldStateById(e){if(e<this.gameLog.length){let t=this.gameLog[e];return t.timestamp?{timestamp:t.timestamp,chatHistory:[...t.chatHistory],shapeInPlace:[...t.shapeInPlace]}:{chatHistory:[...t.chatHistory],shapeInPlace:[...t.shapeInPlace]}}}}},2854:(e,t,a)=>{"use strict";var r;a.d(t,{G:()=>r}),function(e){e.SIMULATION="SIMULATION",e.VISUALIZATION="VISUALIZATION",e.NEBULA="NEBULA"}(r||(r={}))},8992:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{G:()=>l});var s=a(6689),n=a(574),i=a(9121),o=a(947),c=e([n,i]);[n,i]=c.then?(await c)():c;let l=()=>{let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(),c=e=>{t(t=>[...t,e])};return{objects:e,pending:a,setObjects:t,setPending:r,nbObjects:()=>{let t=0;for(let a of e)a instanceof i.F?t+=a.nbObjects():t++;return t},objectExists:(t,a,r)=>{for(let s of e)if(s instanceof i.F){if(s.objectExists(t,a,r))return!0}else if(t===s.position.x&&a===s.position.y&&r===s.position.z)return!0;return!1},addObject:c,removeObject:(e,a,r)=>{t(t=>t.filter(t=>{if(t instanceof i.F){if(t.objectExists(e,a,r))return!1}else if(t.position.x===e&&t.position.y===a&&t.position.z===r)return!1;return!0}))},clear:()=>{t([])},confirmPending:e=>{if(a){let e=a instanceof i.F?new i.F(a.startingPoint,a.shapes,!1,a.breakable):{...a,pending:!1};c(e)}r(e)},setBreaking:e=>{let a=e=>e.breakable?e:e instanceof i.F?new i.F(e.startingPoint,e.shapes.map(a),e.pending,!0):{...e,breakable:!0};t(t=>t.map(t=>t instanceof i.F&&(0,o.AQ)(t.startingPoint,e)?a(t):"position"in t&&(0,o.AQ)(t.position,e)?a(t):t))},removeBreaking:()=>{let e=t=>t instanceof i.F?new i.F(t.startingPoint,t.shapes.map(e),t.pending,!1):{...t,breakable:!1};t(t=>t.map(t=>t.breakable?e(t):t))},getPosition:()=>e.flatMap(e=>e instanceof i.F?e.getPositions():(0,o.R4)(n.N[e.shape],e.position))}};r()}catch(e){r(e)}})},6981:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>u});var s=a(997),n=a(4165),i=a(9575),o=a(2949),c=a(97),l=a(6689),d=a.n(l),h=e([i,o]);[i,o]=h.then?(await h)():h;let p=({position:e})=>(0,s.jsxs)("mesh",{userData:{type:c.o.CELL_BOARD,position:e},rotation:[-Math.PI/2,0,0],position:[e.x,.5,e.z],children:[s.jsx("planeGeometry",{args:[1,1]}),s.jsx(n.Edges,{linewidth:1,threshold:15,color:"black"}),s.jsx("meshStandardMaterial",{color:[i.dp.r,i.dp.g,i.dp.b],side:o.FrontSide})]}),u=({environmentMode:e})=>{let t=i.k[e];return(0,s.jsxs)(s.Fragment,{children:[Array.from({length:t.x.max-t.x.min+1},(e,a)=>t.x.min+a).map(e=>s.jsx(d().Fragment,{children:Array.from({length:t.z.max-t.z.min+1},(e,a)=>t.z.min+a).map(t=>s.jsx(p,{position:{x:e,y:0,z:t}},`${e},${t}`))},e)),s.jsx(n.Text,{scale:[1,1,1],rotation:[Math.PI/2,Math.PI,0],position:[(t.x.max+t.x.min)/2,.5,t.z.min-2],color:"white",anchorX:"center",anchorY:"middle",children:"N"}),s.jsx(n.Text,{scale:[1,1,1],rotation:[Math.PI/2,0,0],position:[t.x.max+2,.5,(t.z.max+t.z.min)/2],color:"white",anchorX:"center",anchorY:"middle",children:"E"}),s.jsx(n.Text,{scale:[1,1,1],rotation:[Math.PI/2,0,Math.PI],position:[t.x.min-2,.5,(t.z.max+t.z.min)/2],color:"white",anchorX:"center",anchorY:"middle",children:"W"}),s.jsx(n.Text,{scale:[1,1,1],rotation:[Math.PI/2,Math.PI,Math.PI],position:[(t.x.max+t.x.min)/2,.5,t.z.max+2],color:"white",anchorX:"center",anchorY:"middle",children:"S"})]})};r()}catch(e){r(e)}})},261:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>u});var s=a(997);a(6689);var n=a(2949),i=a(4165),o=a(9575),c=a(97),l=a(6654),d=e([n,o]);[n,o]=d.then?(await d)():d;let h={[l.J.FRONT]:{translation:new n.Vector3(0,0,.5),rotation:new n.Euler(0,0,0),type:c.o.NON_CLICKABLE_FACE},[l.J.BACK]:{translation:new n.Vector3(0,0,-.5),rotation:new n.Euler(0,Math.PI,0),type:c.o.NON_CLICKABLE_FACE},[l.J.TOP]:{translation:new n.Vector3(0,.5,0),rotation:new n.Euler(-Math.PI/2,0,0),type:c.o.SHAPE_FACE},[l.J.BOTTOM]:{translation:new n.Vector3(0,-.5,0),rotation:new n.Euler(Math.PI/2,0,0),type:c.o.SHAPE_FACE},[l.J.LEFT]:{translation:new n.Vector3(.5,0,0),rotation:new n.Euler(0,Math.PI/2,0),type:c.o.NON_CLICKABLE_FACE},[l.J.RIGHT]:{translation:new n.Vector3(-.5,0,0),rotation:new n.Euler(0,-Math.PI/2,0),type:c.o.NON_CLICKABLE_FACE}},p=e=>{let t=h[e.facingDirection];return(0,s.jsxs)("mesh",{position:t.translation,rotation:t.rotation,userData:t.type===c.o.SHAPE_FACE?{type:c.o.SHAPE_FACE,faceDirection:e.facingDirection}:{type:c.o.NON_CLICKABLE_FACE},children:[s.jsx("planeGeometry",{attach:"geometry",args:[1,1]}),1===e.opacity&&s.jsx(i.Edges,{linewidth:1,threshold:15,color:e.color}),s.jsx("meshStandardMaterial",{attach:"material",color:e.color,transparent:1!==e.opacity,opacity:e.opacity})]})},u=({pending:e,color:t,rotation:a})=>{let r=new n.Color(t.hex);return s.jsx("mesh",{scale:["HORIZONTAL"===a?1:.6,1,"HORIZONTAL"===a?.6:1],children:Object.entries(l.J).map(([t,a])=>s.jsx(p,{color:r,opacity:e?o.yH:1,facingDirection:a},t))})};r()}catch(e){r(e)}})},9697:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>u});var s=a(997);a(6689);var n=a(2949),i=a(4165),o=a(9575),c=a(97),l=a(6654),d=e([n,o]);[n,o]=d.then?(await d)():d;let h={[l.J.FRONT]:{translation:new n.Vector3(0,0,.5),rotation:new n.Euler(0,0,0)},[l.J.BACK]:{translation:new n.Vector3(0,0,-.5),rotation:new n.Euler(0,Math.PI,0)},[l.J.TOP]:{translation:new n.Vector3(0,.5,0),rotation:new n.Euler(-Math.PI/2,0,0)},[l.J.BOTTOM]:{translation:new n.Vector3(0,-.5,0),rotation:new n.Euler(Math.PI/2,0,0)},[l.J.LEFT]:{translation:new n.Vector3(.5,0,0),rotation:new n.Euler(0,Math.PI/2,0)},[l.J.RIGHT]:{translation:new n.Vector3(-.5,0,0),rotation:new n.Euler(0,-Math.PI/2,0)}},p=e=>{let t=h[e.facingDirection];return(0,s.jsxs)("mesh",{position:t.translation,rotation:t.rotation,userData:{type:c.o.SHAPE_FACE,faceDirection:e.facingDirection},children:[s.jsx("planeGeometry",{attach:"geometry",args:[1,1]}),1===e.opacity&&s.jsx(i.Edges,{linewidth:1,threshold:15,color:e.color}),s.jsx("meshStandardMaterial",{attach:"material",color:e.color,transparent:1!==e.opacity,opacity:e.opacity})]})},u=({pending:e,color:t})=>{let a=new n.Color(t.hex);return s.jsx(s.Fragment,{children:Object.entries(l.J).map(([t,r])=>s.jsx(p,{color:a,opacity:e?o.yH:1,facingDirection:r},t))})};r()}catch(e){r(e)}})},758:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{r:()=>l});var s=a(997);a(6689);var n=a(6991),i=a(9121),o=a(6555),c=e([i,o]);[i,o]=c.then?(await c)():c;let l=({color:e,pending:t,position:a,breakable:r})=>{let c=[{color:e,pending:t,position:{x:0,y:0,z:0},shape:n.$.HORIZONTAL_BRIDGE_COMPONENT,uuid:(0,o.v4)()},{color:e,pending:t,position:{x:1,y:0,z:0},shape:n.$.HORIZONTAL_BRIDGE_COMPONENT,uuid:(0,o.v4)()}],l=new i.F(a,c,t,r);return s.jsx(i.ZP,{shapeGroup:l})};r()}catch(e){r(e)}})},1467:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>h});var s=a(997);a(6689);var n=a(2949),i=a(97),o=a(6654),c=a(9575),l=a(4165),d=e([n,c]);[n,c]=d.then?(await d)():d;let h=function({pending:e,position:t,color:a}){let r=new n.LineCurve3(new n.Vector3(0,-.5,0),new n.Vector3(0,.5,0)),d=new n.Color(a.hex),h=e?c.yH:1,p=s.jsx("meshStandardMaterial",{attach:"material",color:d,side:n.FrontSide,transparent:1!==h,opacity:h});return(0,s.jsxs)("mesh",{userData:{type:i.o.NON_CLICKABLE_FACE},scale:[1.1,1,1.1],rotation:[0,-Math.PI/4,0],children:[(0,s.jsxs)("mesh",{position:[0,.5,0],rotation:[-Math.PI/2,0,0],userData:{type:i.o.SHAPE_FACE,faceDirection:o.J.TOP},children:[s.jsx("circleGeometry",{args:[.5,4]}),p]}),(0,s.jsxs)("mesh",{position:[0,-.5,0],rotation:[Math.PI/2,0,0],userData:{type:i.o.SHAPE_FACE,faceDirection:o.J.BOTTOM},children:[s.jsx("circleGeometry",{args:[.5,4]}),p]}),(0,s.jsxs)("mesh",{userData:{type:i.o.NON_CLICKABLE_FACE,position:t,pending:e},children:[s.jsx("tubeGeometry",{args:[r,1,.5,4,!1]}),1===h&&s.jsx(l.Edges,{linewidth:1,color:d.clone().addScalar(.2)}),p]})]})};r()}catch(e){r(e)}})},9213:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>h});var s=a(997);a(6689);var n=a(2949),i=a(97),o=a(6654),c=a(9575),l=a(4165),d=e([n,c]);[n,c]=d.then?(await d)():d;let h=function({pending:e,position:t,color:a}){let r=new n.LineCurve3(new n.Vector3(0,-.5,0),new n.Vector3(0,.5,0)),d=new n.Color(a.hex),h=e?c.yH:1,p=s.jsx("meshStandardMaterial",{attach:"material",color:d,side:n.FrontSide,transparent:1!==h,opacity:h});return(0,s.jsxs)("mesh",{userData:{type:i.o.NON_CLICKABLE_FACE},scale:[.65,1,.65],children:[(0,s.jsxs)("mesh",{position:[0,.5,0],rotation:[-Math.PI/2,0,0],userData:{type:i.o.SHAPE_FACE,faceDirection:o.J.TOP},children:[s.jsx("circleGeometry",{args:[.5,25]}),p]}),(0,s.jsxs)("mesh",{position:[0,-.5,0],rotation:[Math.PI/2,0,0],userData:{type:i.o.SHAPE_FACE,faceDirection:o.J.BOTTOM},children:[s.jsx("circleGeometry",{args:[.5,25]}),p]}),(0,s.jsxs)("mesh",{userData:{type:i.o.NON_CLICKABLE_FACE,position:t,pending:e},children:[s.jsx("tubeGeometry",{args:[r,1,.5,25,!1]}),1===h&&s.jsx(l.Edges,{linewidth:1,color:d.clone().addScalar(.2)}),p]})]})};r()}catch(e){r(e)}})},574:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{N:()=>E,j:()=>C});var s=a(997);a(6689);var n=a(9697),i=a(1467),o=a(9213),c=a(758),l=a(630),d=a(97),h=a(261),p=a(4943),u=a(6991),m=a(8452),x=e([n,i,o,c,l,h,p]);[n,i,o,c,l,h,p]=x.then?(await x)():x;let g={[u.$.CUBE]:n.Z,[u.$.SCREW]:o.Z,[u.$.NUT]:i.Z,[u.$.HORIZONTAL_BRIDGE]:c.r,[u.$.VERTICAL_BRIDGE]:p.v,[u.$.WASHER]:l.Z,[u.$.HORIZONTAL_BRIDGE_COMPONENT]:e=>s.jsx(h.Z,{...e,rotation:"HORIZONTAL"}),[u.$.VERTICAL_BRIDGE_COMPONENT]:e=>s.jsx(h.Z,{...e,rotation:"VERTICAL"})},E={[u.$.CUBE]:[{x:0,y:0,z:0}],[u.$.SCREW]:[{x:0,y:0,z:0}],[u.$.NUT]:[{x:0,y:0,z:0}],[u.$.HORIZONTAL_BRIDGE]:[{x:0,y:0,z:0},{x:1,y:0,z:0}],[u.$.VERTICAL_BRIDGE]:[{x:0,y:0,z:0},{x:0,y:0,z:1}],[u.$.WASHER]:[{x:0,y:0,z:0}],[u.$.HORIZONTAL_BRIDGE_COMPONENT]:[{x:0,y:0,z:0}],[u.$.VERTICAL_BRIDGE_COMPONENT]:[{x:0,y:0,z:0}]},y=(e,t,a)=>{let r;let s=e=>[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)],n=s(e),i=s(t);return r=n.map((e,t)=>Math.max(0,Math.min(255,Math.round(e+(i[t]-e)*a/100)))),"#"+r.map(e=>e.toString(16).padStart(2,"0")).join("")},C=e=>{let t=g[e.shape];return s.jsx("mesh",{userData:{type:d.o.SHAPE,position:e.position,pending:e.pending,shape:e.shape},position:[e.position.x,e.position.y,e.position.z],children:e.breakable&&s.jsx(t,{...e,color:{hex:y(e.color.hex,m.D.WHITE.hex,40),id:m.x.WHITE}})||s.jsx(t,{...e})})};r()}catch(e){r(e)}})},4943:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{v:()=>l});var s=a(997);a(6689);var n=a(6991),i=a(9121),o=a(6555),c=e([i,o]);[i,o]=c.then?(await c)():c;let l=({color:e,pending:t,position:a,breakable:r})=>{let c=new i.F(a,[{color:e,pending:t,position:{x:0,y:0,z:0},shape:n.$.VERTICAL_BRIDGE_COMPONENT,uuid:(0,o.v4)()},{color:e,pending:t,position:{x:0,y:0,z:1},shape:n.$.VERTICAL_BRIDGE_COMPONENT,uuid:(0,o.v4)()}],t,r);return s.jsx(i.ZP,{shapeGroup:c})};r()}catch(e){r(e)}})},630:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>h});var s=a(997);a(6689);var n=a(2949),i=a(97),o=a(6654),c=a(9575),l=a(4165),d=e([n,c]);[n,c]=d.then?(await d)():d;let h=function({pending:e,color:t}){let a=new n.LineCurve3(new n.Vector3(0,-.5,0),new n.Vector3(0,.5,0)),r=new n.Color(t.hex),d=e?c.yH:1,h=s.jsx("meshStandardMaterial",{attach:"material",color:r,side:n.FrontSide,transparent:1!==d,opacity:d});return(0,s.jsxs)("mesh",{userData:{type:i.o.NON_CLICKABLE_FACE},scale:[.95,1,.95],children:[(0,s.jsxs)("mesh",{position:[0,.5,0],rotation:[-Math.PI/2,0,0],userData:{type:i.o.SHAPE_FACE,faceDirection:o.J.TOP},children:[s.jsx("circleGeometry",{args:[.5,4]}),h,1===d&&s.jsx(l.Edges,{linewidth:1,color:r.clone().addScalar(.2)})]}),(0,s.jsxs)("mesh",{position:[0,-.5,0],rotation:[Math.PI/2,0,0],userData:{type:i.o.SHAPE_FACE,faceDirection:o.J.BOTTOM},children:[s.jsx("circleGeometry",{args:[.5,4]}),h,1===d&&s.jsx(l.Edges,{linewidth:1,color:r.clone().addScalar(.2)})]}),(0,s.jsxs)("mesh",{userData:{type:i.o.NON_CLICKABLE_FACE},children:[s.jsx("tubeGeometry",{args:[a,1,.5,4,!1]}),1===d&&s.jsx(l.Edges,{linewidth:1,color:r.clone().addScalar(.2)}),h]})]})};r()}catch(e){r(e)}})},9121:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{F:()=>d,ZP:()=>p});var s=a(997);a(6689);var n=a(97),i=a(947),o=a(574),c=a(6555),l=e([o,c]);[o,c]=l.then?(await l)():l;class d{constructor(e,t,a,r){this.nbObjects=()=>{let e=0;for(let t of this.shapes)t instanceof d?e+=t.nbObjects():e++;return e},this.objectExists=(e,t,a)=>{for(let r of this.shapes)if(r instanceof d){if(r.objectExists(e-this.startingPoint.x,t-this.startingPoint.y,a-this.startingPoint.z))return!0}else if(e===r.position.x+this.startingPoint.x&&t===r.position.y+this.startingPoint.y&&a===r.position.z+this.startingPoint.z)return!0;return!1},this.getPositions=()=>this.shapes.flatMap(e=>e instanceof d?e.getPositions():(0,i.R4)(o.N[e.shape],e.position)),this.startingPoint=e,this.shapes=t.map(e=>({...e,breakable:!!r})),this.uuid=(0,c.v4)(),this.pending=a,this.breakable=!!r}}let h=({shapeGroup:e})=>s.jsx("mesh",{userData:{type:n.o.GROUP,position:e.startingPoint,pending:e.pending},children:e.shapes.map((t,a)=>t instanceof d?s.jsx(h,{shapeGroup:{...t,breakable:e.breakable}},`group-${a}`):s.jsx(o.j,{...t,breakable:e.breakable},`shape-${a}`))}),p=h;r()}catch(e){r(e)}})},1541:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Q:()=>s,Z:()=>p});var s,n=a(997),i=a(6689),o=a(8898),c=a(6410),l=a(490),d=a(3159),h=e([l]);l=(h.then?(await h)():h)[0],function(e){e.SYSTEM="SYSTEM",e.ARCHITECT="ARCHITECT",e.BUILDER="BUILDER ",e.NEBULA="NEBULA"}(s||(s={}));let p=({chat:e,availableUsers:t,nebula:a,shapeInPlace:r})=>{let s=(0,i.useRef)(null);(0,i.useEffect)(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[e.chatHistory]);let[h,p]=(0,i.useState)("ARCHITECT"),[u,m]=(0,i.useState)(!1);return(0,n.jsxs)("div",{id:"chat",className:"module",children:[n.jsx("h3",{children:"Chat"}),n.jsx("hr",{}),n.jsx("div",{ref:s,children:e.chatHistory.map((t,a)=>(0,n.jsxs)("div",{children:[(0===a||t.user!==e.chatHistory[a-1].user)&&n.jsx("span",{className:"userName",children:t.user},`user-${a}`),n.jsx("div",{className:"message",children:t.content},a)]},a))}),t.length>=1&&(0,n.jsxs)(n.Fragment,{children:[n.jsx("hr",{}),(0,n.jsxs)("div",{children:[n.jsx("button",{onClick:()=>{p(t[(t.findIndex(e=>e===h)+1)%t.length])},children:h}),n.jsx("input",{type:"text",className:u?"disable":"",disabled:u,onKeyDown:t=>{if("Enter"===t.key){let s=t.currentTarget.value;e.addMessage({content:s,user:h}),a&&(async()=>{await (0,o.fetchEventSource)("/api/new_message2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s}),onmessage:async t=>{if(t.data){let a="";a=(0,c.Z)(t.data)?atob(t.data):t.data;try{let t=JSON.parse(a);if(console.log(t),"WAIT"===t.type)e.addMessage({content:t.content,user:"SYSTEM"}),m(!0);else if("MESSAGE"===t.type){if(/^((place|pick) .* [0-9]* [0-9]* [0-9]*\n?)*$/.test(t.content)){let e=t.content.trim().split("\n"),a=new d.g;e.forEach(e=>{(0,l.Q)(e.trim(),a)}),async function(e){for(let t=1;t<e.gameLog.length;t++){let a=e.gameLog[t];r.addObject(a.shapeInPlace[a.shapeInPlace.length-1]),await new Promise(e=>setTimeout(e,500))}}(a),console.log(a)}else e.addMessage({content:t.content,user:"NEBULA"})}else"RESUME"===t.type&&m(!1)}catch(e){console.error("Failed to parse JSON:",e)}}}})})(),t.currentTarget.value=""}}})]})]})]})};r()}catch(e){r(e)}})},2744:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>h});var s=a(997),n=a(6689),i=a(2854),o=a(2736),c=a(9575),l=a(7271),d=e([c]);c=(d.then?(await d)():d)[0];let h=e=>{let{currentGameMode:t,setGameMode:a,environmentMode:r,setEnvironmentMode:d}=e,h=(0,l.useRouter)();return(0,n.useEffect)(()=>{c.ug[r].includes(t)?h.push("/"+t.toLowerCase()+"/"+r.toLowerCase()):(a(c.ug[r][0]),h.push("/"+c.ug[r][0].toLowerCase()+"/"+r.toLowerCase()))},[r,t]),(0,s.jsxs)("header",{children:[s.jsx("nav",{id:"modeSelector",children:c.ug[r].map(e=>{let r=i.G[e];return s.jsx("div",{onClick:()=>a(r),className:t===r?"selected":"",children:r},r)})}),s.jsx("button",{onClick:()=>{let e=Object.keys(o.$),t=e.indexOf(r),a=e[(t+1)%e.length];d(a)},id:"environmentMode",children:r})]})};r()}catch(e){r(e)}})},9218:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>g});var s=a(997);a(6689);var n=a(8496),i=a(5080),o=a(1541),c=a(6998),l=a(9575),d=a(8992),h=a(4615),p=a(9916),u=a(6131),m=a(2854),x=e([n,o,l,d]);[n,o,l,d]=x.then?(await x)():x;let g=({environmentMode:e})=>{let t=(0,c.m)(l.VM[e],l.eO[e]),a=(0,d.G)(),r=(0,h.ZP)(),x=(0,u.ZP)(),g=(0,p.R)();return(0,s.jsxs)("main",{children:[s.jsx("div",{id:"mainView",children:s.jsx(n.Z,{gameMode:m.G.NEBULA,shapeInPlace:a,inventory:t,action:r,camera:x.current,environmentMode:e})}),s.jsx(i.Z,{children:s.jsx(o.Z,{chat:g,availableUsers:[o.Q.ARCHITECT],shapeInPlace:a,nebula:!0})})]})};r()}catch(e){r(e)}})},5080:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(997);a(6689);let s=({children:e})=>r.jsx("div",{id:"side",children:e})},5780:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>f});var s=a(997),n=a(6689),i=a(6998),o=a(8992),c=a(2854),l=a(8496),d=a(5080),h=a(6457),p=a(4615),u=a(2321),m=a(4860),x=a(9575),g=a(9916),E=a(1541),y=a(3159),C=a(5451),P=a(6131),j=e([o,l,m,x,E]);[o,l,m,x,E]=j.then?(await j)():j;let f=({environmentMode:e})=>{let t=(0,i.m)(x.VM[e],x.eO[e]),a=(0,o.G)(),r=(0,p.ZP)(),j=(0,P.ZP)(),f=(0,g.R)(),[I,O]=(0,n.useState)(new y.g);return(0,n.useEffect)(()=>{a.pending?document.body.style.cursor="pointer":document.body.style.cursor="auto"},[a]),(0,n.useEffect)(()=>{a.setObjects([]),t.setColors(x.VM[e]),t.setCurrentColor(x.VM[e][0]),t.setShapes(x.eO[e]),t.setCurrentShape(x.eO[e][0]),O(new y.g),f.setChatHistory([])},[e]),(0,n.useEffect)(()=>{let e=I.getLastWorldState();e?(a.objects.length!==e.shapeInPlace.length||f.chatHistory.length!==e.chatHistory.length)&&(I.addWorldState({timestamp:new Date,chatHistory:[...f.chatHistory],shapeInPlace:[...a.objects]}),O(I)):(0!==a.objects.length||0!==f.chatHistory.length)&&(I.addWorldState({timestamp:new Date,chatHistory:[...f.chatHistory],shapeInPlace:[...a.objects]}),O(I))},[a.objects,f.chatHistory]),(0,s.jsxs)("main",{children:[(0,s.jsxs)("div",{id:"mainView",children:[s.jsx(C.Z,{...j}),s.jsx(l.Z,{gameMode:c.G.SIMULATION,shapeInPlace:a,inventory:t,action:r,camera:j.current,environmentMode:e})]}),(0,s.jsxs)(d.Z,{children:[s.jsx(u.Z,{...r}),s.jsx(h.Z,{...t}),s.jsx(m.Z,{inventory:t,environmentMode:e}),s.jsx(E.Z,{chat:f,availableUsers:[E.Q.ARCHITECT,E.Q.BUILDER],shapeInPlace:a}),(0,s.jsxs)("div",{id:"gameButtons",children:[s.jsx("button",{id:"download",onClick:()=>{let t=JSON.stringify(x.JF[e](I)),a=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download="gameLog.json",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},children:"Download json"}),s.jsx("button",{id:"download",onClick:()=>{let e=document.querySelector('canvas[data-engine="three.js r164"]');if(e){let t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t,a.download="canvas-image.png",document.body.appendChild(a),a.click(),document.body.removeChild(a)}else console.error("Canvas element not found")},children:"Download png"}),s.jsx("button",{id:"reset",onClick:()=>{a.clear(),f.clear()},children:"Clear Board"})]})]})]})};r()}catch(e){r(e)}})},9565:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>m});var s=a(997);a(6689);var n=a(9916),i=a(8992),o=a(2854),c=a(8496),l=a(1541),d=a(5080),h=a(2372),p=a(6131),u=e([i,c,l,h]);[i,c,l,h]=u.then?(await u)():u;let m=({environmentMode:e})=>{let t=(0,n.R)(),a=(0,i.G)();return(0,s.jsxs)("main",{children:[s.jsx(c.Z,{environmentMode:e,shapeInPlace:{...a},gameMode:o.G.VISUALIZATION,camera:p.VC.FREE}),(0,s.jsxs)(d.Z,{children:[s.jsx(h.Z,{chatHistory:t,shapeInPlace:a}),s.jsx(l.Z,{chat:t,availableUsers:[],shapeInPlace:a})]})]})};r()}catch(e){r(e)}})},8496:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>m});var s=a(997),n=a(6689),i=a(3784),o=a(4165),c=a(2949),l=a(4029),d=a(9575),h=a(6131),p=e([c,l,d]);[c,l,d]=p.then?(await p)():p;let u=({shapeInPlace:e,gameMode:t,environmentMode:a,inventory:r,action:n})=>{let i=d.k[a];return s.jsx("mesh",{position:[-(i.x.max+i.x.min)/2,1,-(i.z.max+i.z.min)/2],children:s.jsx(l.Z,{shapeInPlace:e,gameMode:t,inventory:r,action:n,environmentMode:a})})},m=e=>{let t=new c.Color(1710878),a=(0,n.useMemo)(()=>s.jsx(u,{...e}),[e]);return(0,s.jsxs)(i.Canvas,{gl:{preserveDrawingBuffer:!0},frameloop:"demand",orthographic:h.QP[e.camera].orthographic,camera:h.QP[e.camera].cameraSettings,children:[a,s.jsx(o.OrbitControls,{enablePan:!1,minPolarAngle:h.QP[e.camera].polarAngle.min,maxPolarAngle:h.QP[e.camera].polarAngle.max,minAzimuthAngle:h.QP[e.camera].azimuthAngle?.min,maxAzimuthAngle:h.QP[e.camera].azimuthAngle?.max}),s.jsx("fog",{attach:"fog",args:["white",20,1e3]}),s.jsx("ambientLight",{intensity:1}),s.jsx("pointLight",{color:"white",position:[3,10,3],intensity:200}),s.jsx("color",{attach:"background",args:[t.r,t.g,t.b]})]},e.camera)};r()}catch(e){r(e)}})},4029:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>C});var s=a(997),n=a(6689),i=a(574),o=a(2854),c=a(6981),l=a(97),d=a(6555),h=a(947),p=a(9121),u=a(4615),m=a(6654),x=a(9575),g=e([i,c,d,p,x]);function E(e){if(e.userData.type===l.o.SHAPE||e.userData.type!==l.o.NON_CLICKABLE_FACE&&e.userData.type!==l.o.SHAPE_FACE)return e;{let t=e;for(;t.userData.type!==l.o.SHAPE;)t.parent&&(t=t.parent);return t}}function y(e){let t={x:0,y:0,z:0};if(e.userData.type===l.o.SHAPE){let a=e.userData;t=(0,h.R4)(t,a.position)}else if(e.userData.type===l.o.GROUP){let a=e.userData;t=(0,h.R4)(t,a.position)}let a=e.parent;return a.userData.type===l.o.GROUP?(0,h.R4)(t,y(a)):t}[i,c,d,p,x]=g.then?(await g)():g;let C=({shapeInPlace:e,gameMode:t,inventory:a,action:r,environmentMode:g})=>{let{objects:C,pending:P}=e,[j,f]=(0,n.useState)(null),I=(t,r,s)=>{let n={uuid:(0,d.v4)(),pending:!0,breakable:!1,color:a.currentColor,position:t,shape:r};return x.YP[g](n,(0,h.R4)(i.N[n.shape],n.position),e.getPosition(),s)},O=t=>{let r=t.intersections[0].object,s=E(r);if(r.userData.type===l.o.SHAPE_FACE){let t=r.userData,n=(0,h.R4)(y(s),m.d[t.faceDirection]);e.confirmPending(I(n,a.currentShape,!0))}else e.confirmPending();t.stopPropagation()},A=t=>{if(t.intersections[0]){let a=E(t.intersections[0].object);if(a.userData.type===l.o.SHAPE){for(;a.parent?.userData.type===l.o.GROUP;)a=a.parent;let t=y(a);e.removeObject(t.x,t.y,t.z)}S(t.intersections.slice(1))}t.stopPropagation()},v=t=>{if(t[0]){let r=t[0].object;if(r.userData.type===l.o.CELL_BOARD){let t=r.userData,s=e.pending,n={...t.position,y:t.position.y+1};if(s){let t=s instanceof p.F?s.startingPoint:s.position;(0,h.AQ)(t,n)||e.setPending(I(n,a.currentShape))}else e.setPending(I(n,a.currentShape))}else if(r.userData.type===l.o.SHAPE_FACE){let t=r.userData,s=E(r);if(!(s?.userData).pending){let r=e.pending,n=(0,h.R4)(y(s),m.d[t.faceDirection]);if(r){let t=r instanceof p.F?r.startingPoint:r.position;(0,h.os)([t],[n])||e.setPending(I(n,a.currentShape))}else e.setPending(I(n,a.currentShape))}}else e.setPending(void 0)}},S=t=>{if(t[0]){e.removeBreaking();let a=E(t[0].object);if(a.userData.type===l.o.SHAPE){for(;a.parent?.userData.type===l.o.GROUP;)a=a.parent;let t=y(a);e.setBreaking(t)}}},L=(0,n.useMemo)(()=>C.map(e=>e instanceof p.F?s.jsx(p.ZP,{shapeGroup:{...e}},e.uuid):s.jsx(i.j,{...e},e.uuid)),[C]),N=(0,n.useMemo)(()=>P&&t===o.G.SIMULATION&&(P instanceof p.F?s.jsx(p.ZP,{shapeGroup:P},P.uuid):s.jsx(i.j,{...P},P.uuid)),[P,t]);return(0,s.jsxs)("mesh",{...t===o.G.SIMULATION?{onPointerDown:e=>f({x:e.clientX,y:e.clientY}),onPointerMove:e=>{let t=e.intersections.filter(e=>{let t=E(e.object);return t.userData.type!==l.o.SHAPE||!t.userData.pending});r?.current===u.aU.PLACE?v(t):S(t)},onPointerOut:t=>{0===t.intersections.length&&(e.setPending(void 0),e.removeBreaking())},onPointerUp:t=>{if(j){let a=Math.abs(t.clientX-j.x),s=Math.abs(t.clientY-j.y);a<5&&s<5&&(r?.current===u.aU.PLACE?e.pending&&O(t):r?.current===u.aU.BREAK&&A(t))}f(null)}}:{},scale:[x.cn[g].x,x.cn[g].y,x.cn[g].z],userData:{type:l.o.SCENE},children:[s.jsx(c.Z,{environmentMode:g},g),L,N]})};r()}catch(e){r(e)}})},2321:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(997);a(6689);var s=a(4615);let n=({current:e,setCurrent:t})=>(0,r.jsxs)("div",{id:"actionSelector",className:"module",children:[r.jsx("h3",{children:"Action:"}),r.jsx("div",{className:"buttonsWrapper",children:Object.values(s.aU).map(a=>r.jsx("button",{className:`${a}${e===a?" selected":""}`,onClick:()=>t(a),children:a[0]+a.slice(1).toLowerCase()},a))})]})},5451:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(997);a(6689);var s=a(6131);let n=({current:e,setCurrent:t})=>r.jsx("div",{id:"cameraSelector",className:"module",children:Object.values(s.VC).map(a=>r.jsx("button",{className:`${a}${e===a?" selected":""}`,onClick:()=>t(a),children:a[0]+a.slice(1).toLowerCase()},a))})},6457:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(997);a(6689);let s=({currentColor:e,colors:t,changeColor:a})=>{let s=[];for(let e=0;e<t.length;e+=3)s.push(t.slice(e,e+3));return(0,r.jsxs)("div",{id:"colorPicker",className:"module",children:[r.jsx("h3",{children:"Color Picker"}),r.jsx("div",{id:"colorList",children:s.map((t,s)=>r.jsx("div",{children:t.map(t=>(0,r.jsxs)("div",{className:`color${e.id===t.id?" selected":""}`,onClick:()=>a(t.id),children:[r.jsx("div",{style:{backgroundColor:t.hex}}),r.jsx("span",{children:t.id[0]+t.id.slice(1).toLowerCase()})]},t.id))},s))})]})}},4860:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>h});var s=a(997);a(6689);var n=a(574),i=a(3784),o=a(4165),c=a(9575),l=a(6991),d=e([n,c]);[n,c]=d.then?(await d)():d;let h=({inventory:{currentColor:e,currentShape:t,shapes:a,setCurrentShape:r},environmentMode:d})=>{let h=[];for(let e=0;e<a.length;e+=2)h.push(a.slice(e,e+2));return a.length>1&&(0,s.jsxs)("div",{id:"shapePicker",className:"module",children:[s.jsx("h3",{children:"Shape Picker"}),s.jsx("div",{id:"colorList",children:h.map((a,h)=>s.jsx("div",{children:a.map(a=>{let h=n.N[a],p=h.map(e=>e.x),u=h.map(e=>e.z);return(0,s.jsxs)("div",{className:`color${t===a?" selected":""}`,onClick:()=>r(a),children:[(0,s.jsxs)(i.Canvas,{frameloop:"demand",camera:{position:[0,2,0],far:1e3},children:[s.jsx("mesh",{scale:[c.cn[d].x,c.cn[d].y,c.cn[d].z],position:[-((Math.max(...p)-Math.min(...p))/2),0,-((Math.max(...u)-Math.min(...u))/2)],children:s.jsx(n.j,{breakable:!1,pending:!1,color:e,position:{x:0,y:0,z:0},shape:a,uuid:l.$[a]})}),s.jsx(o.OrbitControls,{}),s.jsx("fog",{attach:"fog",args:["white",20,1e3]}),s.jsx("ambientLight",{intensity:1}),s.jsx("pointLight",{color:"white",position:[3,10,3],intensity:200})]}),s.jsx("span",{children:l.$[a][0]+l.$[a].slice(1).toLowerCase().replace("_"," ")})]},a)})},h))})]})||s.jsx(s.Fragment,{})};r()}catch(e){r(e)}})},2372:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>h});var s=a(997),n=a(6689),i=a.n(n),o=a(490),c=a(8144),l=e([o,c]);[o,c]=l.then?(await l)():l;let d=i().memo(({gameLog:e,currentIndex:t,currentgameId:a,onClick:r,searched:n})=>(0,s.jsxs)("div",{className:`game ${t===a?"selected":""} ${n?"searched":""}`,onClick:r,children:[!e.getWorldStateById(0)?.chatHistory.length&&!e.getWorldStateById(0)?.shapeInPlace.length&&s.jsx("div",{className:"new"})||s.jsx("div",{className:"old"}),(0,s.jsxs)("span",{children:["Game ",t]})]}));d.displayName="GameComponent";let h=({chatHistory:e,shapeInPlace:t})=>{let[a,r]=(0,n.useState)([]),[i,l]=(0,n.useState)(0),[h,p]=(0,n.useState)(0),[u,m]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=a[i]?.gameLog.reduce((e,t,a,r)=>t.chatHistory.length!==(r[a-1]?.chatHistory.length??0)?a:e,0);p(e)},[i]),(0,n.useEffect)(()=>{if(a[i]){let r=a[i].getWorldStateById(h);r&&(t.setObjects(r.shapeInPlace),e.setChatHistory(r.chatHistory))}},[i,h]);let x=async e=>{let t=e.target.files&&e.target.files[0];if(console.log("1"),t){let e=t.name.split(".").pop()?.toLowerCase();console.log("2");try{if("csv"===e){console.log("3");let e=new FileReader;e.onload=e=>{console.log("csv");let t=e.target?.result,a=(0,o.b)(t);r(e=>[...e,...a])},e.readAsText(t)}else if("json"===e){let e=await (0,c.R)(t);r(t=>[...t,...e])}else console.error("Unsupported file type:",e)}catch(e){console.error("Error processing file:",e)}}};return(0,s.jsxs)("div",{id:"fileManager",className:"module",children:[s.jsx("label",{htmlFor:"gameFileInput",children:"Upload Game file"}),s.jsx("input",{id:"gameFileInput",type:"file",onChange:x}),s.jsx("hr",{}),s.jsx("div",{id:"games",children:a.map((e,t)=>s.jsx(d,{gameLog:e,currentIndex:t,currentgameId:i,onClick:()=>{t!==i&&l(t)},searched:""!==u&&e.gameLog.some(e=>e.chatHistory.some(e=>e.content&&e.content.includes(u)))},t))}),a.length>=1&&s.jsx("input",{type:"text",className:"inputFinder",value:u,onChange:e=>{m(e.target.value)},placeholder:"text to search"}),s.jsx("hr",{}),(0,s.jsxs)("div",{id:"gameManager",className:a[i]?"":"disabled",children:[s.jsx("input",{type:"range",min:0,step:1,max:a[i]?a[i].getLength()-1:1,value:h,onChange:e=>{p(parseInt(e.target.value))}}),(0,s.jsxs)("div",{className:"buttonWrapper",children:[s.jsx("div",{className:`previousGame${a[i]&&0===i?" disabled":""}`,onClick:()=>{l(e=>e-1)}}),s.jsx("div",{className:`previousStep${a[i]&&0===h?" disabled":""}`,onClick:()=>{p(e=>e-1)}}),s.jsx("div",{className:`nextStep${a[i]&&h===a[i].getLength()-1?" disabled":""}`,onClick:()=>{p(e=>e+1),console.log(a)}}),s.jsx("div",{className:`nextGame${a[i]&&i===a.length-1?" disabled":""}`,onClick:()=>{l(e=>e+1)}})]})]})]})};r()}catch(e){r(e)}})},8452:(e,t,a)=>{"use strict";var r;a.d(t,{D:()=>s,x:()=>r}),function(e){e.RED="RED",e.BLUE="BLUE",e.GREEN="GREEN",e.ORANGE="ORANGE",e.PURPLE="PURPLE",e.YELLOW="YELLOW",e.WHITE="WHITE",e.BLACK="BLACK",e.NEW="NEW"}(r||(r={}));let s={RED:{hex:"#ff0000",id:"RED"},BLUE:{hex:"#1b4ccd",id:"BLUE"},GREEN:{hex:"#008000",id:"GREEN"},ORANGE:{hex:"#ff6600",id:"ORANGE"},PURPLE:{hex:"#ac00e6",id:"PURPLE"},YELLOW:{hex:"#ffa500",id:"YELLOW"},WHITE:{hex:"#ffffff",id:"WHITE"},BLACK:{hex:"#000000",id:"BLACK"},NEW:{hex:"#deefe1",id:"NEW"}}},6654:(e,t,a)=>{"use strict";var r;a.d(t,{J:()=>r,d:()=>s}),function(e){e.FRONT="FRONT",e.BACK="BACK",e.TOP="TOP",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT"}(r||(r={}));let s={FRONT:{x:0,y:0,z:1},BACK:{x:0,y:0,z:-1},TOP:{x:0,y:1,z:0},BOTTOM:{x:0,y:-1,z:0},LEFT:{x:1,y:0,z:0},RIGHT:{x:-1,y:0,z:0}}},9575:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{JF:()=>j,VM:()=>x,Wm:()=>I,YP:()=>P,cn:()=>m,dp:()=>A,eO:()=>g,k:()=>E,ug:()=>f,yH:()=>O});var s=a(947),n=a(2949),i=a(2736),o=a(8452),c=a(6991),l=a(5780),d=a(9565),h=a(9218),p=a(2854),u=e([n,l,d,h]);[n,l,d,h]=u.then?(await u)():u;let m={[i.$.MINECRAFT]:{x:1,y:1,z:1},[i.$.COCOBOTS]:{x:1,y:.3,z:1}},x={[i.$.MINECRAFT]:[o.D[o.x.GREEN],o.D[o.x.BLUE],o.D[o.x.PURPLE],o.D[o.x.RED],o.D[o.x.ORANGE],o.D[o.x.YELLOW]],[i.$.COCOBOTS]:[o.D[o.x.GREEN],o.D[o.x.BLUE],o.D[o.x.RED],o.D[o.x.YELLOW],o.D[o.x.NEW]]},g={[i.$.MINECRAFT]:[c.$.CUBE],[i.$.COCOBOTS]:[c.$.NUT,c.$.WASHER,c.$.SCREW,c.$.HORIZONTAL_BRIDGE,c.$.VERTICAL_BRIDGE]},E={[i.$.MINECRAFT]:{x:{min:-5,max:5},y:{min:1,max:11},z:{min:-5,max:5}},[i.$.COCOBOTS]:{x:{min:0,max:7},y:{min:1,max:11},z:{min:0,max:7}}},y=(e,t)=>e.every(e=>e.x>=t.x.min&&e.x<=t.x.max&&e.y>=t.y.min&&e.y<=t.y.max&&e.z>=t.z.min&&e.z<=t.z.max),C=(e,t)=>1===e.y||t.some(t=>t.x===e.x&&t.y===e.y-1&&t.z===e.z),P={[i.$.MINECRAFT]:(e,t,a)=>{if(!(0,s.os)(t,a)&&y(t,E[i.$.MINECRAFT]))return e},[i.$.COCOBOTS]:(e,t,a,r)=>{if(!(0,s.os)(t,a)&&y(t,E[i.$.COCOBOTS])&&(r||t.every(e=>C(e,a))))return e}},j={[i.$.MINECRAFT]:e=>({WorldStates:e.gameLog.map(e=>({Timestamp:e.timestamp,ChatHistory:e.chatHistory.map(e=>`<${e.user[0]}${e.user.slice(1).toLowerCase()}> ${e.content}`),BlocksInGrid:e.shapeInPlace.map(e=>({X:e.position.x,Y:e.position.y,Z:e.position.z,Type:"wool",Colour:e.color.id}))}))}),[i.$.COCOBOTS]:e=>({worldStates:e.gameLog.map(e=>({timestamp:e.timestamp,chatHistory:e.chatHistory.map(e=>`<${e.user[0]}${e.user.slice(1).toLowerCase()}> ${e.content}`),blocksInGrid:e.shapeInPlace.map(e=>({shape:`${Object.values(c.$)[e.shape][0]}${Object.values(c.$)[e.shape].slice(1).toLowerCase()}`,position:{x:e.position.x,y:e.position.y,z:e.position.z},color:`${e.color.id[0]}${e.color.id.slice(1).toLowerCase()}`}))}))})},f={[i.$.MINECRAFT]:[p.G.SIMULATION,p.G.VISUALIZATION],[i.$.COCOBOTS]:[p.G.SIMULATION,p.G.NEBULA]},I={[p.G.SIMULATION]:l.Z,[p.G.VISUALIZATION]:d.Z,[p.G.NEBULA]:h.Z},O=.4,A=new n.Color(11184810);r()}catch(e){r(e)}})},97:(e,t,a)=>{"use strict";var r;a.d(t,{o:()=>r}),function(e){e.CELL_BOARD="CELL_BOARD",e.SHAPE="SHAPE",e.SHAPE_FACE="SHAPE_FACE",e.GROUP="GROUP",e.NON_CLICKABLE_FACE="NON_CLICKABLE_FACE",e.SCENE="SCENE"}(r||(r={}))},6991:(e,t,a)=>{"use strict";var r;a.d(t,{$:()=>r}),function(e){e[e.CUBE=0]="CUBE",e[e.SCREW=1]="SCREW",e[e.NUT=2]="NUT",e[e.WASHER=3]="WASHER",e[e.HORIZONTAL_BRIDGE=4]="HORIZONTAL_BRIDGE",e[e.VERTICAL_BRIDGE=5]="VERTICAL_BRIDGE",e[e.HORIZONTAL_BRIDGE_COMPONENT=6]="HORIZONTAL_BRIDGE_COMPONENT",e[e.VERTICAL_BRIDGE_COMPONENT=7]="VERTICAL_BRIDGE_COMPONENT"}(r||(r={}))},947:(e,t,a)=>{"use strict";function r(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}function s(e,t){for(let a of e)for(let e of t)if(r(a,e))return!0;return!1}function n(e,t){let a=(e,t)=>({x:e.x+t.x,y:e.y+t.y,z:e.z+t.z});return Array.isArray(e)?e.map(e=>a(e,t)):a(e,t)}a.d(t,{AQ:()=>r,R4:()=>n,os:()=>s})},6105:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=e=>{e&&e instanceof Function&&Promise.resolve().then(a.t.bind(a,4032,23)).then(({getCLS:t,getFID:a,getFCP:r,getLCP:s,getTTFB:n})=>{t(e),a(e),r(e),s(e),n(e)})}},490:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Q:()=>d,b:()=>l});var s=a(3159),n=a(8452),i=a(6555),o=a(6991),c=e([i]);function l(e){try{let t;let a=[],r=/"(.+?)","?(.*?)"?(?=(\n"|$))/gs,c=/((?:^(?:(?:place|pick) .*?\n)*|EMPTY))(.*?)(<.*)/s;for(;null!==(t=r.exec(e));){let[e,r]=[t[1],t[2]],l=e.match(c),h=l[2].trim().replace(/^"+|"+$/g,""),p=l[3].trim().split("\n"),u={chatHistory:[],shapeInPlace:[]};(function(e,t){"EMPTY"!==e&&e&&e.split(":").forEach(e=>{let a=e.match(/(\d+) (\w+) (.*)/);if(a){let[,,e,r]=a;r.split(",").forEach(a=>{let[r,s,c]=a.trim().split(" "),l=n.D[e.toUpperCase()];t.shapeInPlace.push({pending:!1,breakable:!1,uuid:(0,i.v4)(),color:l,shape:o.$.CUBE,position:{x:parseInt(r),y:parseInt(s),z:parseInt(c)}})})}})})(h,u);let m=new s.g;m.addWorldState(u),p.forEach(e=>{d(e.trim(),m)}),r.split("\n").forEach(e=>{d(e.trim(),m)}),a.push(m)}return a}catch(e){throw Error(`Error parsing CSV: ${e.message}`)}}function d(e,t){let a=e.trim(),r=t.getLastWorldState();if(a.startsWith("place")){let e=a.split(" ");r?.shapeInPlace.push({pending:!1,breakable:!1,uuid:i.v4(),color:n.D[e[1].toUpperCase()],position:{x:parseInt(e[2]),y:parseInt(e[3]),z:parseInt(e[4])},shape:o.$.CUBE})}else if(a.startsWith("pick")){let e=a.split(" "),t={x:parseInt(e[1]),y:parseInt(e[2]),z:parseInt(e[3])};r.shapeInPlace=r.shapeInPlace.filter(e=>e.position.x!==t.x||e.position.y!==t.y||e.position.z!==t.z)}else{let e=a.split(/<(.*)> (.*)/);r?.chatHistory.push({user:e[1],content:e[2]})}t.addWorldState(r)}i=(c.then?(await c)():c)[0],r()}catch(e){r(e)}})},6410:(e,t,a)=>{"use strict";function r(e){if("string"!=typeof e)return!1;0===e.indexOf("data:")&&(e=e.split(",")[1]);try{return btoa(atob(e))===e}catch(e){return!1}}a.d(t,{Z:()=>r})},8144:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{R:()=>l});var s=a(3159),n=a(8452),i=a(6991),o=a(6555),c=e([o]);function l(e){return new Promise((t,a)=>{let r=new FileReader;r.onload=e=>{try{let{worldStates:a}={worldStates:JSON.parse(e.target?.result)},r={chatHistory:[],shapeInPlace:[],timestamp:new Date},c=[],l=new s.g;a.forEach(e=>{r.shapeInPlace.push({color:n.D[n.x[e.color.toUpperCase()]],breakable:!1,pending:!1,position:{x:e.x,y:e.y,z:e.z},shape:i.$.CUBE,uuid:(0,o.v4)()});let t=JSON.parse(JSON.stringify(r));l.addWorldState(t)}),c.push(l),t(c)}catch(e){a(e)}},r.onerror=e=>{a(e.target?.error||Error("Unknown FileReader error"))},r.readAsText(e)})}o=(c.then?(await c)():c)[0],r()}catch(e){r(e)}})},5445:()=>{},8898:e=>{"use strict";e.exports=require("@microsoft/fetch-event-source")},4165:e=>{"use strict";e.exports=require("@react-three/drei")},3784:e=>{"use strict";e.exports=require("@react-three/fiber")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4032:e=>{"use strict";e.exports=require("web-vitals")},2949:e=>{"use strict";e.exports=import("three")},6555:e=>{"use strict";e.exports=import("uuid")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[26,897],()=>a(5536));module.exports=r})();